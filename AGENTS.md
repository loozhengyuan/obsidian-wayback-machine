# Agent Instructions for obsidian-wayback-machine

This document provides instructions for AI agents to work effectively with this repository. Please follow these guidelines to ensure your contributions are efficient and align with the project's standards.

## High-Level Details

*   **Repository Summary:** This repository contains an Obsidian plugin that automatically converts web links into their corresponding Wayback Machine archived versions. When a markdown file is modified, the plugin scans for URLs, queries the `archive.org` API for a saved snapshot, and replaces the original link with the archived one.
*   **Project Type:** Obsidian Plugin
*   **Language and Framework:** The project is written in TypeScript and uses the Deno runtime.

## Build and Validation Instructions

To ensure consistency and avoid build failures, please use **Deno version 2.4.3**, as specified in the continuous integration (CI) workflow.

### Setup

No special setup is required besides having Deno installed.

### Validation

The CI pipeline runs a series of checks. Before submitting any changes, you **must** run these commands locally to ensure they pass.

1.  **Type Checking:**
    ```bash
    deno check
    ```

2.  **Linting:**
    ```bash
    deno lint
    ```

3.  **Formatting Check:**
    ```bash
    deno fmt --check
    ```

You can also run `deno fmt` to automatically fix formatting issues.

### Building

To build the plugin, run the following command:

```bash
deno task build
```

This command bundles the source code from `main.ts` into `main.js`, which is the file loaded by Obsidian. The `obsidian` dependency is marked as external and is provided by the Obsidian environment at runtime.

## Project Layout

*   `main.ts`: This is the main entry point for the plugin. It contains the core logic, including the `WaybackMachinePlugin` class that hooks into Obsidian's events and the `WaybackMachineClient` for interacting with the Wayback Machine API.
*   `deno.json`: This file defines the project's Deno tasks and dependencies. The primary task is `build`.
*   `manifest.json`: This is the standard manifest file for an Obsidian plugin, containing metadata like the plugin's ID, name, and version.
*   `.github/workflows/ci.yml`: This file defines the GitHub Actions workflow for continuous integration. It is the source of truth for the validation steps listed above.
*   `main.js`: This is a build artifact generated by the `deno task build` command. **Do not edit this file directly.** All changes should be made to `main.ts`.

## Final Instructions

The information provided here is intended to be comprehensive and accurate. Trust these instructions and use them as your primary guide. Only resort to exploring the codebase if you find that this information is incomplete or incorrect.
